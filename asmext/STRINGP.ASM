	OPTION	OFFSET:GROUP
	IFDEF	FARSTCK
SSEG	TEXTEQU	<STACK>
	ELSE
SSEG	TEXTEQU	<DGROUP>
	ENDIF
	PUBLIC	_GETSTR_P,_PUTSTR_P
	PUBLIC	_STRBUF
DGROUP	GROUP	ASMEXT_DATA
ASMEXT_TEXT	SEGMENT	PARA	PUBLIC	'CODE'
	ASSUME	CS:ASMEXT_TEXT,DS:DGROUP,ES:NOTHING,SS:SSEG
_GETSTR_P	PROC	CTYPE
	PUSH	BP
	PUSH	SI
	PUSH	DI
	MOV	BP,SP
	MOV	AX,DS
	MOV	ES,AX
	MOV	SI,[BP+0AH]
	IFIDN	DTYPE,<FAR>
	PUSH	DS
	MOV	DS,[BP+0CH]
	ENDIF
	XOR	AX,AX
	LODSB
	MOV	CX,AX
	LEA	DI,[_STRBUF]
	REP	MOVSB
	IFIDN	DTYPE,<FAR>
	POP	DS
	ENDIF
	POP	DI
	POP	SI
	POP	BP
	RET
_GETSTR_P	ENDP
_PUTSTR_P	PROC	CTYPE
	PUSH	BP
	MOV	BP,SP
	LEA	AX,[OUTSTR]
	MOV	BX,AX
	MOV	AX,[BP+6]
	MOV	[BX],AL
	IFIDN	DTYPE,<FAR>
	MOV	DX,DS
	ENDIF
	POP	BP
	RET
_PUTSTR_P	ENDP
ASMEXT_TEXT	ENDS
ASMEXT_DATA	SEGMENT	WORD	PUBLIC	'DATA'
OUTSTR	DB	?
_STRBUF	DB	256 DUP(?)
ASMEXT_DATA	ENDS
	IFDEF	FARSTCK
STACK	SEGMENT	PARA	STACK	'STACK'
STACK	ENDS
	ENDIF
	END
