	OPTION	OFFSET:GROUP
	IFDEF	FARSTCK
SSEG	TEXTEQU	<STACK>
	ELSE
SSEG	TEXTEQU	<DGROUP>
	ENDIF
	PUBLIC	_GETSTR_C,_PUTSTR_C
	PUBLIC	_STRBUF
DGROUP	GROUP	ASMEXT_DATA
ASMEXT_TEXT	SEGMENT	PARA	PUBLIC	'CODE'
	ASSUME	CS:ASMEXT_TEXT,DS:DGROUP,ES:NOTHING,SS:SSEG
_GETSTR_C	PROC	CTYPE
	PUSH	BP
	PUSH	SI
	PUSH	DI
	MOV	BP,SP
	IFIDN	DTYPE,<NEAR>
	MOV	AX,DS
	MOV	ES,AX
	ELSE
	MOV	ES,[BP+0CH]
	ENDIF
	MOV	DI,[BP+0AH]
	MOV	CX,100H
	XOR	AX,AX
	REPNE	SCASB
	MOV	AX,100H
	SUB	AX,CX
	MOV	CX,AX
	MOV	SI,[BP+0AH]
	LEA	DI,[_STRBUF]
	IFIDN	DTYPE,<FAR>
	PUSH	DS
	PUSH	ES
	POP	DS
	POP	ES
	ENDIF
	REP	MOVSB
	IFIDN	DTYPE,<FAR>
	PUSH	DS
	PUSH	ES
	POP	DS
	POP	ES
	ENDIF
	POP	DI
	POP	SI
	POP	BP
	RET
_GETSTR_C	ENDP
_PUTSTR_C	PROC	CTYPE
	PUSH	BP
	MOV	BP,SP
	LEA	AX,[_STRBUF]
	MOV	BX,AX
	ADD	BX,[BP+6]
	MOV	BYTE PTR [BX],0
	IFIDN	DTYPE,<FAR>
	MOV	DX,DS
	ENDIF
	POP	BP
	RET
_PUTSTR_C	ENDP
ASMEXT_TEXT	ENDS
ASMEXT_DATA	SEGMENT	WORD	PUBLIC	'DATA'
_STRBUF	DB	257 DUP(?)
ASMEXT_DATA	ENDS
	IFDEF	FARSTCK
STACK	SEGMENT	PARA	STACK	'STACK'
STACK	ENDS
	ENDIF
	END
