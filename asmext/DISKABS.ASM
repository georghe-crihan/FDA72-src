	PUBLIC	ABSREAD,ABSWRITE
	EXTRN	_FINSTR:FAR
DGROUP	GROUP	ASMEXT_DATA
ASMEXT_TEXT	SEGMENT	PARA	PUBLIC	'CODE'
	ASSUME	CS:ASMEXT_TEXT,DS:DGROUP,ES:DGROUP,SS:NOTHING
ABSREAD	PROC	FAR
	PUSH	BP
	PUSH	SI
	PUSH	DI
	MOV	BP,SP
	PUSH	[BP+0AH]
	CALL	_FINSTR
	ADD	SP,2
	MOV	BX,AX
	MOV	ES,DX
	MOV	CX,[BP+0CH]
	MOV	DX,[BP+0EH]
	MOV	SI,[BP+10H]
	MOV	AX,[BP+12H]
	PUSH	SI
	PUSH	DX
	PUSH	CX
	PUSH	BX
	PUSH	AX
	PUSH	DS
	PUSH	ES
	POP	DS
	POP	ES
	TEST	SI,SI
	JNZ	L9
	INT	25H
	POP	CX
	JNC	L1
	CMP	AX,207H
	JNE	L2
L9:	PUSH	DS
	PUSH	ES
	POP	DS
	POP	ES
	MOV	CX,0FFFFH
	LEA	BX,[PARBLK]
	POP	AX
	MOV	[BX+8],ES
	POP	[BX+6]
	POP	[BX+4]
	POP	[BX]
	POP	[BX+2]
	INT	25H
	POP	CX
L4:	MOV	AX,0
	JNC	L3
	INC	AX
L3:	POP	DI
	POP	SI
	POP	BP
	RET	0AH
L2:	STC
L1:	PUSH	DS
	PUSH	ES
	POP	DS
	POP	ES
	POP	AX
	POP	BX
	POP	CX
	POP	DX
	POP	SI
	JMP	SHORT	L4
ABSREAD	ENDP
ABSWRITE	PROC	FAR
	PUSH	BP
	PUSH	SI
	PUSH	DI
	MOV	BP,SP
	PUSH	[BP+0AH]
	CALL	_FINSTR
	ADD	SP,2
	MOV	BX,AX
	MOV	ES,DX
	MOV	CX,[BP+0CH]
	MOV	DX,[BP+0EH]
	MOV	SI,[BP+10H]
	MOV	AX,[BP+12H]
	PUSH	SI
	PUSH	DX
	PUSH	CX
	PUSH	BX
	PUSH	AX
	PUSH	DS
	PUSH	ES
	POP	DS
	POP	ES
	TEST	SI,SI
	JNZ	L10
	INT	26H
	POP	CX
	JNC	L5
	CMP	AX,207H
	JNE	L6
L10:	PUSH	DS
	PUSH	ES
	POP	DS
	POP	ES
	MOV	CX,0FFFFH
	LEA	BX,[PARBLK]
	POP	AX
	MOV	[BX+8],ES
	POP	[BX+6]
	POP	[BX+4]
	POP	[BX]
	POP	[BX+2]
	INT	26H
	POP	CX
L8:	MOV	AX,0
	JNC	L7
	INC	AX
L7:	POP	DI
	POP	SI
	POP	BP
	RET	0AH
L6:	STC
L5:	PUSH	DS
	PUSH	ES
	POP	DS
	POP	ES
	POP	AX
	POP	BX
	POP	CX
	POP	DX
	POP	SI
	JMP	SHORT	L8
ABSWRITE	ENDP
ASMEXT_TEXT	ENDS
ASMEXT_DATA	SEGMENT	WORD	PUBLIC	'DATA'
PARBLK	DW	5 DUP(0)
ASMEXT_DATA	ENDS
	END
